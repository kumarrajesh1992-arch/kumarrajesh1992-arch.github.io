{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "HDI Residuals after Accounting for Income (2022)",
    "subtitle": "Positive values indicate HDI overperformance relative to income | Data Source: Global Data Lab",
    "anchor": "middle",
    "fontSize": 14,
    "subtitleFontSize": 11
  },
  "data": {
    "url": "https://raw.githubusercontent.com/kumarrajesh1992-arch/kumarrajesh1992-arch.github.io/refs/heads/main/project/PC3_PC4_stateHDI_residuals_2023.csv",
    "format": { "type": "csv" }
  },
  "transform": [
    {
      "calculate": "datum.residual_HDI >= 0 ? 'Outperformer' : 'Underperformer'",
      "as": "Performance"
    }
  ],
  "layer": [
    {
      "mark": { "type": "bar" },
      "encoding": {
        "y": { "field": "State", "type": "nominal", "sort": "-x", "title": "State" },
        "x": {
          "field": "residual_HDI",
          "type": "quantitative",
          "title": "HDI residual (actual âˆ’ predicted)"
        },
        "color": {
          "field": "Performance",
          "type": "nominal",
          "scale": {
            "domain": ["Outperformer", "Underperformer"],
            "range": ["#2b8cbe", "#d73027"]
          },
          "legend": {
            "title": "Performance relative to income",
            "labelFontSize": 11,
            "titleFontSize": 12
          }
        },
        "tooltip": [
          { "field": "State", "type": "nominal" },
          {
            "field": "residual_HDI",
            "type": "quantitative",
            "title": "HDI residual",
            "format": ".3f"
          },
          { "field": "Performance", "type": "nominal", "title": "Classification" }
        ]
      }
    },

    {
      "mark": {
        "type": "rule",
        "stroke": "#555",
        "strokeWidth": 2,
        "strokeDash": [2, 2]
      },
      "encoding": {
        "x": { "datum": 0 }
      }
    }
  ],
  "width": 700,
  "height": 500,
  "config": {}
}

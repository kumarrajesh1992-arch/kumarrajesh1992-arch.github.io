{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Social Sector Spending and Income-Adjusted Human Development",
    "subtitle": "Residual HDI vs Health and Education Expenditure Shares | Data: RBI State Finances (2023-24)",
    "anchor": "middle",
    "fontSize": 14,
    "subtitleFontSize": 11
  },
  "data": {
    "url": "https://raw.githubusercontent.com/kumarrajesh1992-arch/kumarrajesh1992-arch.github.io/refs/heads/main/project/PC5_Data_Budget.csv",
    "format": {"type": "csv"}
  },
  "transform": [
    {
      "fold": ["health_share", "education_share"],
      "as": ["Category", "Spending"]
    }
  ],
  "facet": {"columns": 2, "field": "Category", "title": null},
  "spec": {
    "width": 400,
    "height": 360,
    "mark": {"type": "circle", "opacity": 0.8, "size": 120, "tooltip": true},
    "encoding": {
      "x": {
        "field": "Spending",
        "type": "quantitative",
        "title": "Share of Total Expenditure (%)",
        "scale": {"zero": false}
      },
      "y": {
        "field": "residual_HDI",
        "type": "quantitative",
        "title": "Residual HDI (actual â€“ predicted)",
        "scale": {"domain": [-0.06, 0.06]}
      },
      "color": {
        "field": "Category",
        "type": "nominal",
        "legend": null,
        "scale": {"range": ["#1b7837", "#2166ac"]}
      },
      "tooltip": [
        {"field": "State", "type": "nominal"},
        {"field": "residual_HDI", "type": "quantitative", "format": ".3f"},
        {"field": "Spending", "type": "quantitative", "format": ".2f"},
        {"field": "Category", "type": "nominal"}
      ]
    },
    "layer": [
      {"mark": {"type": "circle", "opacity": 0.8, "size": 120}},
      {
        "mark": {"type": "line", "color": "black", "strokeWidth": 2},
        "transform": [{"regression": "residual_HDI", "on": "Spending"}],
        "encoding": {"x": {"field": "Spending"}, "y": {"field": "residual_HDI"}}
      }
    ]
  },
  "config": {
    "axis": {"labelFontSize": 11, "titleFontSize": 12, "grid": true},
    "view": {"stroke": "transparent"}
  }
}

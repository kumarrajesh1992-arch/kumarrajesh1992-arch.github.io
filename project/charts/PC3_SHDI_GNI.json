{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "State-level HDI and GNI Per-Capita Income in India (2022)",
    "subtitle": "Observed HDI and fitted relationship with log GNI per capita | Data Source: Global Data Lab",
    "anchor": "middle",
    "fontSize": 14,
    "subtitleFontSize": 11
  },
  "data": {
    "url": "https://raw.githubusercontent.com/kumarrajesh1992-arch/kumarrajesh1992-arch.github.io/refs/heads/main/project/data/PC3_PC4_stateHDI_residuals_2023.csv",
    "format": { "type": "csv" }
  },
  "layer": [
    {
      "mark": { "type": "circle", "opacity": 0.85, "size": 120, "clip": true },
      "encoding": {
        "x": {
          "field": "log_GNI_pc",
          "type": "quantitative",
          "title": "log GNI per capita (2021 PPP$)",
          "scale": { "domain": [8.2, 9.8], "clamp": true }
        },
        "y": {
          "field": "HDI",
          "type": "quantitative",
          "title": "Human Development Index (HDI)",
          "scale": { "domain": [0.575, 0.8], "clamp": true }
        },
        "tooltip": [
          { "field": "State", "type": "nominal", "title": "State" },
          { "field": "HDI", "type": "quantitative", "title": "HDI (actual)", "format": ".3f" },
          { "field": "log_GNI_pc", "type": "quantitative", "title": "log GNI pc", "format": ".2f" },
          {
            "field": "residual_HDI",
            "type": "quantitative",
            "title": "HDI residual (actual − predicted)",
            "format": ".3f"
          }
        ]
      }
    },
    {
      "mark": { "type": "line", "color": "black", "strokeWidth": 2, "clip": true },
      "encoding": {
        "x": {
          "field": "log_GNI_pc",
          "type": "quantitative",
          "scale": { "domain": [8.2, 9.8], "clamp": true }
        },
        "y": {
          "field": "HDI_pred",
          "type": "quantitative",
          "scale": { "domain": [0.575, 0.8], "clamp": true }
        }
      }
    },
    {
      "transform": [
        {
          "filter": {
            "field": "State",
            "oneOf": ["Kerala", "Manipur", "Gujarat", "Andhra Pradesh"]
          }
        }
      ],
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 8,
        "fontSize": 9,
        "fontWeight": "normal",
        "color": "#333"
      },
      "encoding": {
        "x": { "field": "log_GNI_pc", "type": "quantitative" },
        "y": { "field": "HDI", "type": "quantitative" },
        "text": { "field": "State", "type": "nominal" }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "top",
        "fontSize": 10,
        "fontWeight": "normal",
        "color": "#626161d0"
      },
      "encoding": {
        "x": { "value": 12 },
        "y": { "value": 12 },
        "text": {
          "value": "β = 0.92 | R² = 0.85"
        }
      }
    }
  ],
  "width": 700,
  "height": 400,
  "config": {
    "axis": { "labelFontSize": 11, "titleFontSize": 12 },
    "view": { "stroke": "transparent" }
  }
}
